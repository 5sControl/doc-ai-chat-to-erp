# –§–∞–π–ª—ã –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –¥—Ä—É–≥–æ–π –ø—Ä–æ–µ–∫—Ç

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –¥—Ä—É–≥–æ–π Flutter –ø—Ä–æ–µ–∫—Ç –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Kokoro TTS –±–µ–∑ –ø—Ä–æ–±–ª–µ–º.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

### 1. –°–ª–æ–≤–∞—Ä—å —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏–∏ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

**–§–∞–π–ª:** `assets/tokenizer_vocab.json`

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ —Ç–µ–∫—É—â–µ–º –ø—Ä–æ–µ–∫—Ç–µ:**
```
assets/tokenizer_vocab.json
```

**–ö—É–¥–∞ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å:**
```
–Ω–æ–≤—ã–π_–ø—Ä–æ–µ–∫—Ç/
  assets/
    tokenizer_vocab.json
```

**–í–∞–∂–Ω–æ:**
- –≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏–∏ –∏–∑ IPATokenizer —Å Unicode escape sequences
- –ë–µ–∑ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞ —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –§–∞–π–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω –≤ `pubspec.yaml`:
  ```yaml
  flutter:
    assets:
      - assets/tokenizer_vocab.json
  ```

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç `scripts/generate_tokenizer_vocab.py` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ñ–∞–π–ª–∞

---

### 2. –ü–∞—Ç—á–µ–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ Kokoro TTS (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

**–ü–∞–ø–∫–∞:** `lib/patches/kokoro_tts_flutter_patched/`

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ —Ç–µ–∫—É—â–µ–º –ø—Ä–æ–µ–∫—Ç–µ:**
```
lib/patches/kokoro_tts_flutter_patched/
  lib/
    kokoro_tts_flutter.dart
    src/
      kokoro.dart          # –° –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏–∏
      tokenizer.dart      # –° –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏–∏
      onnx_model_runner.dart
      audio_utils.dart
      config.dart
      models/
        tts_result.dart
        voice.dart
  pubspec.yaml
  README.md
```

**–ö—É–¥–∞ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å:**
```
–Ω–æ–≤—ã–π_–ø—Ä–æ–µ–∫—Ç/
  lib/
    patches/
      kokoro_tts_flutter_patched/
        (–≤—Å—é –ø–∞–ø–∫—É)
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ pubspec.yaml:**
```yaml
dependencies:
  kokoro_tts_flutter:
    path: lib/patches/kokoro_tts_flutter_patched
```

**–í–∞–∂–Ω–æ:**
- –≠—Ç–∞ –≤–µ—Ä—Å–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–º–µ–Ω–Ω–æ —ç—Ç—É –≤–µ—Ä—Å–∏—é, –∞ –Ω–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é –∏–∑ pub.dev

---

### 3. –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è Kokoro TTS Engine (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

**–§–∞–π–ª:** `lib/data/datasources/tts/kokoro_tts_engine.dart`

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ —Ç–µ–∫—É—â–µ–º –ø—Ä–æ–µ–∫—Ç–µ:**
```
lib/data/datasources/tts/kokoro_tts_engine.dart
```

**–ö—É–¥–∞ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å:**
```
–Ω–æ–≤—ã–π_–ø—Ä–æ–µ–∫—Ç/
  lib/
    data/
      datasources/
        tts/
          kokoro_tts_engine.dart
```

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- `lib/data/datasources/storage/tts_settings_datasource.dart` (—Å–º. –Ω–∏–∂–µ)
- `lib/core/constants/app_constants.dart` (—á–∞—Å—Ç–∏—á–Ω–æ, —Å–º. –Ω–∏–∂–µ)
- `lib/core/services/tts_model_download_service.dart` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–í–∞–∂–Ω–æ:**
- –≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –∞—É–¥–∏–æ (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π sample rate, –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è Float32List –≤ PCM16)
- –°–æ–¥–µ—Ä–∂–∏—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

### 4. –•—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ TTS (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

**–§–∞–π–ª:** `lib/data/datasources/storage/tts_settings_datasource.dart`

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ —Ç–µ–∫—É—â–µ–º –ø—Ä–æ–µ–∫—Ç–µ:**
```
lib/data/datasources/storage/tts_settings_datasource.dart
```

**–ö—É–¥–∞ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å:**
```
–Ω–æ–≤—ã–π_–ø—Ä–æ–µ–∫—Ç/
  lib/
    data/
      datasources/
        storage/
          tts_settings_datasource.dart
```

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- `shared_preferences` package
- `lib/core/constants/app_constants.dart` (—á–∞—Å—Ç–∏—á–Ω–æ)

**–í–∞–∂–Ω–æ:**
- –•—Ä–∞–Ω–∏—Ç –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ TTS (—è–∑—ã–∫, —Å–∫–æ—Ä–æ—Å—Ç—å, –≥—Ä–æ–º–∫–æ—Å—Ç—å, pitch, voice ID, synthesis speed)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç SharedPreferences –¥–ª—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏

---

### 5. –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—á–∞—Å—Ç–∏—á–Ω–æ)

**–§–∞–π–ª:** `lib/core/constants/app_constants.dart`

**–ß—Ç–æ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å:** –¢–æ–ª—å–∫–æ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å TTS:

```dart
// TTS Settings Keys
static const String keyTtsLanguage = 'tts_language';
static const String keyTtsSpeechRate = 'tts_speech_rate';
static const String keyTtsVolume = 'tts_volume';
static const String keyTtsPitch = 'tts_pitch';
static const String keyTtsEngineType = 'tts_engine_type';
static const String keyKokoroVoiceId = 'kokoro_voice_id';
static const String keyKokoroSynthesisSpeed = 'kokoro_synthesis_speed';

// TTS Defaults
static const String defaultTtsLanguage = 'en-US';
static const double defaultTtsSpeechRate = 1.0;
static const double defaultTtsVolume = 1.0;
static const double defaultTtsPitch = 1.0;
static const String defaultTtsEngineType = 'kokoro';
static const String defaultKokoroVoiceId = 'af';
static const double defaultKokoroSynthesisSpeed = 1.0;
```

**–ö—É–¥–∞ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å:**
```
–Ω–æ–≤—ã–π_–ø—Ä–æ–µ–∫—Ç/
  lib/
    core/
      constants/
        app_constants.dart  # –î–æ–±–∞–≤–∏—Ç—å —ç—Ç–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
```

---

### 6. –°–∫—Ä–∏–ø—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª–æ–≤–∞—Ä—è (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

**–§–∞–π–ª:** `scripts/generate_tokenizer_vocab.py`

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ —Ç–µ–∫—É—â–µ–º –ø—Ä–æ–µ–∫—Ç–µ:**
```
scripts/generate_tokenizer_vocab.py
```

**–ö—É–¥–∞ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å:**
```
–Ω–æ–≤—ã–π_–ø—Ä–æ–µ–∫—Ç/
  scripts/
    generate_tokenizer_vocab.py
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
python3 scripts/generate_tokenizer_vocab.py
```

**–í–∞–∂–Ω–æ:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ `tokenizer_vocab.json`
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å Unicode escape sequences

---

### 7. –¢–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã (–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û, –Ω–æ –ø–æ–ª–µ–∑–Ω–æ)

**–ü–∞–ø–∫–∞:** `test_kokoro/`

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ —Ç–µ–∫—É—â–µ–º –ø—Ä–æ–µ–∫—Ç–µ:**
```
test_kokoro/
  test_kokoro_tokens.py
  requirements.txt
  README.md
```

**–ö—É–¥–∞ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å:**
```
–Ω–æ–≤—ã–π_–ø—Ä–æ–µ–∫—Ç/
  test_kokoro/
    (–≤—Å—é –ø–∞–ø–∫—É)
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
cd test_kokoro
pip install -r requirements.txt
python test_kokoro_tokens.py
```

**–í–∞–∂–Ω–æ:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏–∏
- –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Ç–æ–∫–µ–Ω—ã —Å —ç—Ç–∞–ª–æ–Ω–Ω—ã–º–∏ –∏–∑ IPATokenizer

---

### 8. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–§–∞–π–ª—ã:**
- `docs/tts/KOKORO_TTS_INTEGRATION_PROMPT.md` - –ø–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- `docs/tts/KOKORO_TTS_QUICKSTART.md` - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- `docs/tts/kokoro_tts_integration_checklist.md` - —á–µ–∫–ª–∏—Å—Ç

**–ö—É–¥–∞ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å:**
```
–Ω–æ–≤—ã–π_–ø—Ä–æ–µ–∫—Ç/
  docs/
    tts/
      KOKORO_TTS_INTEGRATION_PROMPT.md
      KOKORO_TTS_QUICKSTART.md
      kokoro_tts_integration_checklist.md
```

---

### 9. Lexicon (–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û)

**–§–∞–π–ª:** `assets/lexicon.json`

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ —Ç–µ–∫—É—â–µ–º –ø—Ä–æ–µ–∫—Ç–µ:**
```
assets/lexicon.json
```

**–ö—É–¥–∞ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å:**
```
–Ω–æ–≤—ã–π_–ø—Ä–æ–µ–∫—Ç/
  assets/
    lexicon.json
```

**–í–∞–∂–Ω–æ:**
- –£–ª—É—á—à–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ —Ñ–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º —Ñ–∞–π–ª–æ–º `{}` - –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–æ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º

---

### 10. –§–∞–π–ª—ã —Ñ–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏ malsami (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–ª—è –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–∞)

**–§–∞–π–ª—ã:** `assets/us_gold.json` –∏ `assets/us_silver.json`

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ —Ç–µ–∫—É—â–µ–º –ø—Ä–æ–µ–∫—Ç–µ:**
```
assets/us_gold.json
assets/us_silver.json
```

**–ö—É–¥–∞ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å:**
```
–Ω–æ–≤—ã–π_–ø—Ä–æ–µ–∫—Ç/
  assets/
    us_gold.json
    us_silver.json
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
- `us_gold.json` - —Å–ª–æ–≤–∞—Ä—å –≤—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–π —Ñ–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏ –¥–ª—è –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ (~92,000+ –∑–∞–ø–∏—Å–µ–π)
- `us_silver.json` - —Å–ª–æ–≤–∞—Ä—å –±–∞–∑–æ–≤–æ–π —Ñ–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏ –¥–ª—è –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ (~10,000+ –∑–∞–ø–∏—Å–µ–π)
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π `malsami` –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –≤ —Ñ–æ–Ω–µ–º—ã (G2P - Grapheme-to-Phoneme)

**–í–ê–ñ–ù–û:**
- –≠—Ç–∏ —Ñ–∞–π–ª—ã **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Ñ–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
- –ë–µ–∑ –Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–µ —Å–º–æ–∂–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç –≤ —Ñ–æ–Ω–µ–º—ã
- –§–∞–π–ª—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `pubspec.yaml`:
  ```yaml
  flutter:
    assets:
      - assets/us_gold.json
      - assets/us_silver.json
  ```

**–û—Ç–∫—É–¥–∞ –≤–∑—è—Ç—å:**
1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–∑ —ç—Ç–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ (`assets/us_gold.json` –∏ `assets/us_silver.json`)
2. –ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞–∫–µ—Ç `malsami` –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–∑ `packages/malsami/assets/`
3. –ò–ª–∏ —Å–∫–∞—á–∞–π—Ç–µ –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è malsami (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)

**–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤:**
- `us_gold.json` - ~2-3 MB
- `us_silver.json` - ~200-300 KB

---

## üìã –ß–µ–∫–ª–∏—Å—Ç –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã:
- [ ] `assets/tokenizer_vocab.json` - —Å–ª–æ–≤–∞—Ä—å —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏–∏
- [ ] `lib/patches/kokoro_tts_flutter_patched/` - –ø–∞—Ç—á–µ–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
- [ ] `assets/us_gold.json` - —Å–ª–æ–≤–∞—Ä—å —Ñ–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏ (–¥–ª—è –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ)
- [ ] `assets/us_silver.json` - —Å–ª–æ–≤–∞—Ä—å —Ñ–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏ (–¥–ª—è –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ)

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ñ–∞–π–ª—ã:
- [ ] `lib/data/datasources/tts/kokoro_tts_engine.dart` - –æ–±–µ—Ä—Ç–∫–∞
- [ ] `lib/data/datasources/storage/tts_settings_datasource.dart` - —Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- [ ] `lib/core/constants/app_constants.dart` - –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã TTS (—á–∞—Å—Ç–∏—á–Ω–æ)
- [ ] `scripts/generate_tokenizer_vocab.py` - —Å–∫—Ä–∏–ø—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª–æ–≤–∞—Ä—è

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã:
- [ ] `test_kokoro/` - —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
- [ ] `docs/tts/` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] `assets/lexicon.json` - —Å–ª–æ–≤–∞—Ä—å —Ñ–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Å–ª–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. –û–±–Ω–æ–≤–∏—Ç–µ pubspec.yaml

**–í–ê–ñ–ù–û:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `path:` –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –ù–ï `git:` –∏ –ù–ï –≤–µ—Ä—Å–∏—é –∏–∑ pub.dev!

–î–æ–±–∞–≤—å—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```yaml
dependencies:
  # –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ path –∫ –ª–æ–∫–∞–ª—å–Ω–æ–π –ø–∞–ø–∫–µ
  kokoro_tts_flutter:
    path: lib/patches/kokoro_tts_flutter_patched
  # –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
  #   git: url: https://github.com/... (—ç—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!)
  #   version: ^0.2.0 (–æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç)
  
  onnxruntime: ^1.15.0
  path_provider: ^2.1.0
  shared_preferences: ^2.2.0
  audioplayers: ^5.2.0
```

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```bash
flutter pub get
```

**–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –æ—à–∏–±–∫–∏:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–∞–ø–∫–∞ `lib/patches/kokoro_tts_flutter_patched/` —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ –ø–∞–ø–∫–µ –µ—Å—Ç—å —Ñ–∞–π–ª `pubspec.yaml`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—É—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π (–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞)

–î–æ–±–∞–≤—å—Ç–µ assets:
```yaml
flutter:
  assets:
    - assets/tokenizer_vocab.json
    - assets/lexicon.json  # –µ—Å–ª–∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª–∏
```

### 2. –û–±–Ω–æ–≤–∏—Ç–µ –∏–º–ø–æ—Ä—Ç—ã

–í —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö –æ–±–Ω–æ–≤–∏—Ç–µ –∏–º–ø–æ—Ä—Ç—ã –ø–æ–¥ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:
- `package:your_app/core/constants/app_constants.dart`
- `package:your_app/data/datasources/storage/tts_settings_datasource.dart`

### 3. –°–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª—ã –º–æ–¥–µ–ª–∏

–°–∫–∞—á–∞–π—Ç–µ –∏ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç–µ:
- `model.onnx` (~330 MB) ‚Üí `assets/tts_models/kokoro/model.onnx`
- `voices.json` (~52 MB) ‚Üí `assets/tts_models/kokoro/voices.json`

–ò—Å—Ç–æ—á–Ω–∏–∫: https://huggingface.co/NeuML/kokoro-base-onnx

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **tokenizer_vocab.json** - –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ï–ù
   - –ë–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Å–ª–æ–≤–∞—Ä—è —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç `generate_tokenizer_vocab.py` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

2. **–ü–∞—Ç—á–µ–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞** - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞
   - –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –∏–∑ pub.dev –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–µ—Ä—Å–∏—é –∏–∑ `lib/patches/kokoro_tts_flutter_patched/`

3. **Unicode escape sequences** - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
   - –í—Å–µ –Ω–µ-ASCII —Å–∏–º–≤–æ–ª—ã –≤ JSON –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ `\uXXXX`
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `ensure_ascii=True` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ JSON

4. **–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –º–æ–¥–µ–ª–∏** - –Ω–µ –∑–∞–±—É–¥—å—Ç–µ
   - –§–∞–π–ª—ã –º–æ–¥–µ–ª–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –∏–∑ assets –≤ —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `copyModelFiles()` –ø–µ—Ä–µ–¥ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π

---

## üìù –ü—Ä–∏–º–µ—Ä –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä —Ñ–∞–π–ª–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã:

1. `assets/tokenizer_vocab.json`
2. `lib/patches/kokoro_tts_flutter_patched/` (–≤—Å—è –ø–∞–ø–∫–∞)
3. `lib/data/datasources/tts/kokoro_tts_engine.dart` (–∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥ –ø—Ä–æ–µ–∫—Ç)
4. –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã TTS –∏–∑ `app_constants.dart`

–û—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ, —Å–ª–µ–¥—É—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [KOKORO_TTS_INTEGRATION_PROMPT.md](./KOKORO_TTS_INTEGRATION_PROMPT.md) - –ø–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- [KOKORO_TTS_QUICKSTART.md](./KOKORO_TTS_QUICKSTART.md) - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- [kokoro_tts_integration_checklist.md](./kokoro_tts_integration_checklist.md) - —á–µ–∫–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
